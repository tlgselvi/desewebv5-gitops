# upgrade-protocol-v1.1.yaml

# EA Plan Master Control — DESE JARVIS Enhancement Protocol

# Amaç: 2025 Cursor özelliklerini aktif hale getirir.

# Etki: Kod veya runtime değişmez. Sadece geliştirme ortamı (Cursor) optimize edilir.

meta:
  version: 1.1
  compatible_with: "EA Plan Master Control v6.7.0"
  safe_mode: true
  description: >
    Geliştirici ortamı için Cursor 2025 optimizasyonları.
    Context, prompt zincirleme, git awareness, MCP entegrasyonu ve AI review sistemini aktif eder.

settings:
  ai:
    contextPersistence: true         # JARVIS state korunur (Cursor restart sonrası bile)
    gitAwareness: true               # Git diff odaklı analiz (commit öncesi optimizasyon)
    structuredCommits: true          # Otomatik commit summary formatını korur

  mcp:
    enabled: true
    servers:
      - name: finbot
        url: "http://localhost:5555/finbot"
      - name: mubot
        url: "http://localhost:5556/mubot"
      - name: dese
        url: "http://localhost:5557/dese"

  review:
    enabled: true
    ruleset: ".cursor/review.yaml"

prompt_chains:
  - name: build-test-deploy
    steps:
      - build-finbot
      - test-finbot
      - deploy-finbot
  - name: audit-trace
    steps:
      - audit-trace-run
      - audit-trace-summary
    autoCommit: false

context:
  persistenceFile: ".cursor/context.json"
  maxTokens: 128000
  autoRefresh: true

review_rules:
  - pattern: "src/**/*.ts"
    check: "type safety"
    severity: high
  - pattern: "frontend/**/*.tsx"
    check: "UI state complexity < 3"
    severity: medium
  - pattern: "src/db/schema/**/*.ts"
    check: "no raw SQL"
    severity: critical
  - pattern: "src/ws/**/*.ts"
    check: "WebSocket broadcast efficiency"
    severity: medium

git_hooks:
  preCommit: "cursor review --staged"
  postCommit: "cursor notify --context update"

notes:
  - "Bu dosya yalnızca geliştirme ortamını etkiler."
  - "Sistemin çalışmasına, Docker build'lerine veya deployment pipeline'a müdahale etmez."
  - "Cursor 0.47+ sürümünde tüm parametreler desteklenir."
  - "Etkinleştirmek için: cursor settings import .cursor/upgrade-protocol-v1.1.yaml"
