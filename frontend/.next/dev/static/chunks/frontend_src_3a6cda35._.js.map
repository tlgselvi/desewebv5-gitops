{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/desesonpro/desewebv5/frontend/src/utils/logger.ts"],"sourcesContent":["/**\r\n * Frontend logger utility\r\n * Provides structured logging for the frontend application\r\n */\r\n\r\ntype LogLevel = 'debug' | 'info' | 'warn' | 'error';\r\n\r\ninterface LogContext {\r\n  [key: string]: unknown;\r\n}\r\n\r\nclass Logger {\r\n  private isDevelopment(): boolean {\r\n    return process.env.NODE_ENV === 'development';\r\n  }\r\n\r\n  private formatMessage(level: LogLevel, message: string, context?: LogContext): string {\r\n    const timestamp = new Date().toISOString();\r\n    const contextStr = context ? ` ${JSON.stringify(context)}` : '';\r\n    return `[${timestamp}] [${level.toUpperCase()}] ${message}${contextStr}`;\r\n  }\r\n\r\n  private log(level: LogLevel, message: string, context?: LogContext): void {\r\n    if (!this.isDevelopment() && level === 'debug') {\r\n      return; // Skip debug logs in production\r\n    }\r\n\r\n    const formattedMessage = this.formatMessage(level, message, context);\r\n\r\n    switch (level) {\r\n      case 'debug':\r\n        // eslint-disable-next-line no-console\r\n        console.debug(formattedMessage);\r\n        break;\r\n      case 'info':\r\n        // eslint-disable-next-line no-console\r\n        console.info(formattedMessage);\r\n        break;\r\n      case 'warn':\r\n        // eslint-disable-next-line no-console\r\n        console.warn(formattedMessage);\r\n        break;\r\n      case 'error':\r\n        // For errors, use console.error but format to reduce stack trace noise\r\n        // Pass context as second parameter to avoid showing logger's stack trace\r\n        if (context && Object.keys(context).length > 0) {\r\n          // eslint-disable-next-line no-console\r\n          console.error(`%c${formattedMessage}`, 'color: red; font-weight: bold;', context);\r\n        } else {\r\n          // eslint-disable-next-line no-console\r\n          console.error(`%c${formattedMessage}`, 'color: red; font-weight: bold;');\r\n        }\r\n        break;\r\n    }\r\n  }\r\n\r\n  debug(message: string, context?: LogContext): void {\r\n    this.log('debug', message, context);\r\n  }\r\n\r\n  info(message: string, context?: LogContext): void {\r\n    this.log('info', message, context);\r\n  }\r\n\r\n  warn(message: string, context?: LogContext): void {\r\n    this.log('warn', message, context);\r\n  }\r\n\r\n  error(message: string, context?: LogContext): void {\r\n    this.log('error', message, context);\r\n  }\r\n\r\n  /**\r\n   * Grouped logging for development (e.g., error details)\r\n   */\r\n  group(title: string, logs: () => void): void {\r\n    if (this.isDevelopment()) {\r\n      // eslint-disable-next-line no-console\r\n      console.group(title);\r\n      logs();\r\n      // eslint-disable-next-line no-console\r\n      console.groupEnd();\r\n    } else {\r\n      // In production, just execute the logs without grouping\r\n      logs();\r\n    }\r\n  }\r\n}\r\n\r\nexport const logger = new Logger();\r\n\r\n"],"names":[],"mappings":"AAAA;;;CAGC;;;;AAUU;AAFX,MAAM;IACI,gBAAyB;QAC/B,OAAO,oDAAyB;IAClC;IAEQ,cAAc,KAAe,EAAE,OAAe,EAAE,OAAoB,EAAU;QACpF,MAAM,YAAY,IAAI,OAAO,WAAW;QACxC,MAAM,aAAa,UAAU,CAAC,CAAC,EAAE,KAAK,SAAS,CAAC,UAAU,GAAG;QAC7D,OAAO,CAAC,CAAC,EAAE,UAAU,GAAG,EAAE,MAAM,WAAW,GAAG,EAAE,EAAE,UAAU,YAAY;IAC1E;IAEQ,IAAI,KAAe,EAAE,OAAe,EAAE,OAAoB,EAAQ;QACxE,IAAI,CAAC,IAAI,CAAC,aAAa,MAAM,UAAU,SAAS;YAC9C,QAAQ,gCAAgC;QAC1C;QAEA,MAAM,mBAAmB,IAAI,CAAC,aAAa,CAAC,OAAO,SAAS;QAE5D,OAAQ;YACN,KAAK;gBACH,sCAAsC;gBACtC,QAAQ,KAAK,CAAC;gBACd;YACF,KAAK;gBACH,sCAAsC;gBACtC,QAAQ,IAAI,CAAC;gBACb;YACF,KAAK;gBACH,sCAAsC;gBACtC,QAAQ,IAAI,CAAC;gBACb;YACF,KAAK;gBACH,uEAAuE;gBACvE,yEAAyE;gBACzE,IAAI,WAAW,OAAO,IAAI,CAAC,SAAS,MAAM,GAAG,GAAG;oBAC9C,sCAAsC;oBACtC,QAAQ,KAAK,CAAC,CAAC,EAAE,EAAE,kBAAkB,EAAE,kCAAkC;gBAC3E,OAAO;oBACL,sCAAsC;oBACtC,QAAQ,KAAK,CAAC,CAAC,EAAE,EAAE,kBAAkB,EAAE;gBACzC;gBACA;QACJ;IACF;IAEA,MAAM,OAAe,EAAE,OAAoB,EAAQ;QACjD,IAAI,CAAC,GAAG,CAAC,SAAS,SAAS;IAC7B;IAEA,KAAK,OAAe,EAAE,OAAoB,EAAQ;QAChD,IAAI,CAAC,GAAG,CAAC,QAAQ,SAAS;IAC5B;IAEA,KAAK,OAAe,EAAE,OAAoB,EAAQ;QAChD,IAAI,CAAC,GAAG,CAAC,QAAQ,SAAS;IAC5B;IAEA,MAAM,OAAe,EAAE,OAAoB,EAAQ;QACjD,IAAI,CAAC,GAAG,CAAC,SAAS,SAAS;IAC7B;IAEA;;GAEC,GACD,MAAM,KAAa,EAAE,IAAgB,EAAQ;QAC3C,IAAI,IAAI,CAAC,aAAa,IAAI;YACxB,sCAAsC;YACtC,QAAQ,KAAK,CAAC;YACd;YACA,sCAAsC;YACtC,QAAQ,QAAQ;QAClB,OAAO;YACL,wDAAwD;YACxD;QACF;IACF;AACF;AAEO,MAAM,SAAS,IAAI","debugId":null}},
    {"offset": {"line": 87, "column": 0}, "map": {"version":3,"sources":["file:///C:/desesonpro/desewebv5/frontend/src/api/client.ts"],"sourcesContent":["import axios, { AxiosError, AxiosRequestConfig, InternalAxiosRequestConfig } from \"axios\";\r\nimport { logger } from \"@/utils/logger\";\r\n\r\nexport interface ApiError {\r\n  error: string;\r\n  message: string;\r\n  details?: {\r\n    issues?: Array<{\r\n      field: string;\r\n      message: string;\r\n      code: string;\r\n    }>;\r\n  };\r\n  timestamp?: string;\r\n  path?: string;\r\n}\r\n\r\n// Create axios instance with default config\r\nconst getBaseURL = () => {\r\n  // In development, use full URL if NEXT_PUBLIC_API_URL is set\r\n  if (typeof window !== \"undefined\" && process.env.NEXT_PUBLIC_API_URL) {\r\n    return process.env.NEXT_PUBLIC_API_URL;\r\n  }\r\n  // Default to backend port 3001 in development\r\n  return typeof window !== \"undefined\" \r\n    ? process.env.NODE_ENV === 'development'\r\n      ? \"http://localhost:3001/api/v1\"\r\n      : `${window.location.protocol}//${window.location.host}/api/v1`\r\n    : \"/api/v1\";\r\n};\r\n\r\nexport const api = axios.create({\r\n  baseURL: getBaseURL(),\r\n  timeout: 15000,\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n// Request interceptor - Add auth token and dev headers\r\napi.interceptors.request.use(\r\n  (config: InternalAxiosRequestConfig) => {\r\n    // Add dev mode header for CLI authentication bypass\r\n    if (typeof window !== \"undefined\" && process.env.NODE_ENV === \"development\") {\r\n      if (config.headers) {\r\n        config.headers[\"X-Master-Control-CLI\"] = \"true\";\r\n      }\r\n    }\r\n\r\n    const token = localStorage.getItem(\"token\");\r\n    if (token && config.headers) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => {\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Response interceptor - Handle errors globally\r\napi.interceptors.response.use(\r\n  (response) => {\r\n    return response;\r\n  },\r\n  async (error: AxiosError<ApiError>) => {\r\n    const originalRequest = error.config as InternalAxiosRequestConfig & {\r\n      _retry?: boolean;\r\n    };\r\n\r\n    // Handle 401 Unauthorized - Token expired or invalid\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n\r\n      logger.warn(\"Authentication Error: Token expired or invalid. Redirecting to login...\", {\r\n        url: originalRequest?.url,\r\n        method: originalRequest?.method,\r\n      });\r\n\r\n      // Clear token and redirect to login\r\n      if (typeof window !== \"undefined\") {\r\n        localStorage.removeItem(\"token\");\r\n        \r\n        // Only redirect if we're not already on the login page\r\n        if (!window.location.pathname.includes(\"/login\")) {\r\n          window.location.href = \"/login\";\r\n        }\r\n      }\r\n\r\n      return Promise.reject(error);\r\n    }\r\n\r\n    // Handle 403 Forbidden\r\n    if (error.response?.status === 403) {\r\n      const message = error.response.data?.message || \"Access denied\";\r\n      logger.error(\"Forbidden\", {\r\n        message,\r\n        url: originalRequest?.url,\r\n        method: originalRequest?.method,\r\n      });\r\n      // Could show a toast notification here\r\n    }\r\n\r\n    // Handle 429 Too Many Requests\r\n    if (error.response?.status === 429) {\r\n      const retryAfter = error.response.headers[\"retry-after\"];\r\n      const message = error.response.data?.message || \"Too many requests. Please try again later.\";\r\n      logger.warn(\"Rate limit exceeded\", {\r\n        message,\r\n        retryAfter,\r\n        url: originalRequest?.url,\r\n        method: originalRequest?.method,\r\n      });\r\n      // Could implement exponential backoff retry here\r\n    }\r\n\r\n    // Handle 500+ Server Errors with detailed logging\r\n    if (error.response?.status && error.response.status >= 500) {\r\n      const errorDetails = {\r\n        type: \"Server Error\",\r\n        status: error.response.status,\r\n        message: error.response.data?.message || \"Internal server error\",\r\n        url: originalRequest?.url,\r\n        baseURL: originalRequest?.baseURL,\r\n        method: originalRequest?.method?.toUpperCase(),\r\n        data: error.response.data,\r\n      };\r\n\r\n      logger.group(`Server Error ${errorDetails.status}`, () => {\r\n        logger.error(\"Server error occurred\", {\r\n          status: errorDetails.status,\r\n          message: errorDetails.message,\r\n          url: `${errorDetails.baseURL}${errorDetails.url}`,\r\n          method: errorDetails.method || \"N/A\",\r\n          responseData: errorDetails.data,\r\n        });\r\n      });\r\n    }\r\n\r\n    // Handle network errors with detailed logging\r\n    if (!error.response) {\r\n      const errorMessage = error.message || \"Network error\";\r\n      const fullUrl = `${originalRequest?.baseURL || ''}${originalRequest?.url || ''}`;\r\n      const errorDetails = {\r\n        type: \"Network Error\",\r\n        message: errorMessage,\r\n        code: error.code,\r\n        url: originalRequest?.url,\r\n        baseURL: originalRequest?.baseURL,\r\n        fullUrl,\r\n        method: originalRequest?.method?.toUpperCase(),\r\n      };\r\n\r\n      // Log network error with context (only in development)\r\n      // Note: Network errors are expected when backend is down, so we log them gracefully\r\n      if (process.env.NODE_ENV === \"development\") {\r\n        logger.group(\"âš ï¸ Network Error (Backend may be offline)\", () => {\r\n          logger.error(\"Request failed\", {\r\n            method: errorDetails.method,\r\n            url: errorDetails.fullUrl,\r\n            code: errorDetails.code,\r\n            message: errorDetails.message,\r\n          });\r\n          \r\n          // Provide troubleshooting tips for common network errors\r\n          if (error.code === \"ECONNREFUSED\" || errorMessage.includes(\"Network Error\") || error.code === \"ERR_NETWORK\") {\r\n            logger.warn(\"ðŸ’¡ Troubleshooting\", {\r\n              currentBaseURL: getBaseURL(),\r\n              configuredApiUrl: process.env.NEXT_PUBLIC_API_URL || \"not set\",\r\n              check: [\r\n                \"âœ“ Backend server running on http://localhost:3001?\",\r\n                \"âœ“ Docker containers (PostgreSQL, Redis) running?\",\r\n                \"âœ“ CORS configured correctly?\",\r\n                \"âœ“ NEXT_PUBLIC_API_URL set correctly?\",\r\n              ],\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        // In production, log more concisely\r\n        logger.error(\"Network request failed\", {\r\n          code: error.code,\r\n          url: originalRequest?.url,\r\n        });\r\n      }\r\n    }\r\n\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// Helper function to extract error message\r\nexport function getErrorMessage(error: unknown): string {\r\n  if (axios.isAxiosError<ApiError>(error)) {\r\n    if (error.response?.data?.message) {\r\n      return error.response.data.message;\r\n    }\r\n    if (error.response?.data?.error) {\r\n      return error.response.data.error;\r\n    }\r\n    if (error.message) {\r\n      return error.message;\r\n    }\r\n  }\r\n  if (error instanceof Error) {\r\n    return error.message;\r\n  }\r\n  return \"An unexpected error occurred\";\r\n}\r\n\r\n// Helper function to extract validation errors\r\nexport function getValidationErrors(error: unknown): Array<{ field: string; message: string }> {\r\n  if (axios.isAxiosError<ApiError>(error)) {\r\n    return error.response?.data?.details?.issues?.map((issue) => ({\r\n      field: issue.field,\r\n      message: issue.message,\r\n    })) || [];\r\n  }\r\n  return [];\r\n}\r\n\r\n// Retry helper for failed requests\r\nexport async function retryRequest<T>(\r\n  requestFn: () => Promise<T>,\r\n  maxRetries: number = 3,\r\n  delay: number = 1000\r\n): Promise<T> {\r\n  let lastError: unknown;\r\n\r\n  for (let attempt = 1; attempt <= maxRetries; attempt++) {\r\n    try {\r\n      return await requestFn();\r\n    } catch (error) {\r\n      lastError = error;\r\n\r\n      // Don't retry on 4xx errors (except 429)\r\n      if (axios.isAxiosError(error) && error.response?.status) {\r\n        const status = error.response.status;\r\n        if (status >= 400 && status < 500 && status !== 429) {\r\n          throw error; // Don't retry client errors\r\n        }\r\n      }\r\n\r\n      if (attempt < maxRetries) {\r\n        const backoffDelay = delay * Math.pow(2, attempt - 1); // Exponential backoff\r\n        await new Promise((resolve) => setTimeout(resolve, backoffDelay));\r\n      }\r\n    }\r\n  }\r\n\r\n  throw lastError;\r\n}\r\n\r\n// API methods with proper typing\r\nexport const apiMethods = {\r\n  get: <T = any>(url: string, config?: AxiosRequestConfig) =>\r\n    api.get<T>(url, config).then((res) => res.data),\r\n\r\n  post: <T = any>(url: string, data?: any, config?: AxiosRequestConfig) =>\r\n    api.post<T>(url, data, config).then((res) => res.data),\r\n\r\n  put: <T = any>(url: string, data?: any, config?: AxiosRequestConfig) =>\r\n    api.put<T>(url, data, config).then((res) => res.data),\r\n\r\n  patch: <T = any>(url: string, data?: any, config?: AxiosRequestConfig) =>\r\n    api.patch<T>(url, data, config).then((res) => res.data),\r\n\r\n  delete: <T = any>(url: string, config?: AxiosRequestConfig) =>\r\n    api.delete<T>(url, config).then((res) => res.data),\r\n};\r\n\r\n// Export default api for backward compatibility\r\nexport default api;\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 308, "column": 0}, "map": {"version":3,"sources":["file:///C:/desesonpro/desewebv5/frontend/src/app/projects/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { useEffect, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { api, getErrorMessage } from \"@/api/client\";\r\n\r\ninterface Project {\r\n  id: string;\r\n  name: string;\r\n  description?: string;\r\n  domain: string;\r\n  status: string;\r\n  targetDomainAuthority: number;\r\n  targetCtrIncrease: number;\r\n  primaryKeywords: string[];\r\n  createdAt: string;\r\n  owner?: {\r\n    email: string;\r\n    firstName?: string;\r\n    lastName?: string;\r\n  };\r\n}\r\n\r\nexport default function ProjectsPage() {\r\n  const [projects, setProjects] = useState<Project[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [filter, setFilter] = useState<string>(\"all\");\r\n\r\n  useEffect(() => {\r\n    const fetchProjects = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const url = filter === \"all\" ? \"/projects\" : `/projects?status=${filter}`;\r\n        const response = await api.get<{ projects: Project[] }>(url);\r\n        setProjects(response.data.projects || []);\r\n        setError(null);\r\n      } catch (err) {\r\n        setError(getErrorMessage(err));\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProjects();\r\n  }, [filter]);\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case \"active\":\r\n        return \"bg-green-100 text-green-800 border-green-200\";\r\n      case \"inactive\":\r\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\r\n      case \"archived\":\r\n        return \"bg-red-100 text-red-800 border-red-200\";\r\n      default:\r\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-8\">\r\n        <div className=\"animate-pulse space-y-4\">\r\n          <div className=\"h-8 bg-gray-200 rounded w-1/4\"></div>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n            {[1, 2, 3, 4, 5, 6].map((i) => (\r\n              <div key={i} className=\"h-48 bg-gray-200 rounded\"></div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div className=\"p-8\">\r\n        <div className=\"bg-red-50 border border-red-200 rounded-lg p-4\">\r\n          <p className=\"text-red-800\">Error: {error}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-8\">\r\n      <div className=\"flex items-center justify-between mb-8\">\r\n        <div>\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Projects</h1>\r\n          <p className=\"text-gray-600\">Manage your SEO projects</p>\r\n        </div>\r\n        <Link\r\n          href=\"/projects/new\"\r\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium\"\r\n        >\r\n          + New Project\r\n        </Link>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"mb-6 flex gap-2\">\r\n        {[\"all\", \"active\", \"inactive\", \"archived\"].map((status) => (\r\n          <button\r\n            key={status}\r\n            onClick={() => setFilter(status)}\r\n            className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${\r\n              filter === status\r\n                ? \"bg-blue-600 text-white\"\r\n                : \"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50\"\r\n            }`}\r\n          >\r\n            {status.charAt(0).toUpperCase() + status.slice(1)}\r\n          </button>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Projects Grid */}\r\n      {projects.length === 0 ? (\r\n        <div className=\"bg-white p-12 rounded-lg shadow-sm border border-gray-200 text-center\">\r\n          <p className=\"text-gray-500 mb-4\">No projects found</p>\r\n          <Link\r\n            href=\"/projects/new\"\r\n            className=\"inline-block px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            Create Your First Project\r\n          </Link>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {projects.map((project) => (\r\n            <div\r\n              key={project.id}\r\n              className=\"bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow overflow-hidden\"\r\n            >\r\n              <div className=\"p-6\">\r\n                <div className=\"flex items-start justify-between mb-4\">\r\n                  <div className=\"flex-1\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-900 mb-1\">\r\n                      {project.name}\r\n                    </h3>\r\n                    {project.description && (\r\n                      <p className=\"text-sm text-gray-600 line-clamp-2\">\r\n                        {project.description}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                  <span\r\n                    className={`px-2 py-1 text-xs font-semibold rounded-full border ${getStatusColor(\r\n                      project.status\r\n                    )}`}\r\n                  >\r\n                    {project.status}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"space-y-2 mb-4\">\r\n                  <div className=\"flex items-center gap-2 text-sm\">\r\n                    <span className=\"text-gray-500\">Domain:</span>\r\n                    <a\r\n                      href={project.domain}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"text-blue-600 hover:text-blue-700 font-mono text-xs\"\r\n                    >\r\n                      {project.domain}\r\n                    </a>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between text-sm\">\r\n                    <span className=\"text-gray-500\">Domain Authority:</span>\r\n                    <span className=\"font-semibold text-gray-900\">\r\n                      {project.targetDomainAuthority}/100\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"flex items-center justify-between text-sm\">\r\n                    <span className=\"text-gray-500\">CTR Target:</span>\r\n                    <span className=\"font-semibold text-gray-900\">\r\n                      +{project.targetCtrIncrease}%\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n\r\n                {project.primaryKeywords && project.primaryKeywords.length > 0 && (\r\n                  <div className=\"mb-4\">\r\n                    <p className=\"text-xs text-gray-500 mb-2\">Keywords:</p>\r\n                    <div className=\"flex flex-wrap gap-1\">\r\n                      {project.primaryKeywords.slice(0, 3).map((keyword, idx) => (\r\n                        <span\r\n                          key={idx}\r\n                          className=\"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded\"\r\n                        >\r\n                          {keyword}\r\n                        </span>\r\n                      ))}\r\n                      {project.primaryKeywords.length > 3 && (\r\n                        <span className=\"px-2 py-1 text-gray-500 text-xs\">\r\n                          +{project.primaryKeywords.length - 3}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\r\n                  <span className=\"text-xs text-gray-500\">\r\n                    {new Date(project.createdAt).toLocaleDateString()}\r\n                  </span>\r\n                  <Link\r\n                    href={`/projects/${project.id}`}\r\n                    className=\"text-sm text-blue-600 hover:text-blue-700 font-medium\"\r\n                  >\r\n                    View Details â†’\r\n                  </Link>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}