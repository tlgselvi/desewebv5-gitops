{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/desesonpro/desewebv5/frontend/src/app/tools/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\ninterface ConnectionStatus {\r\n  status: string;\r\n  chromeAvailable: boolean;\r\n  connections: number;\r\n  activeConnections: number;\r\n}\r\n\r\ninterface BrowserConnection {\r\n  id: string;\r\n  browserType: string;\r\n  cdpUrl: string;\r\n  wsEndpoint?: string;\r\n  status: \"connected\" | \"disconnected\" | \"error\";\r\n  connectedAt?: string;\r\n}\r\n\r\nexport default function ToolsPage() {\r\n  const [connectionStatus, setConnectionStatus] = useState<ConnectionStatus | null>(null);\r\n  const [connections, setConnections] = useState<BrowserConnection[]>([]);\r\n  const [cdpUrl, setCdpUrl] = useState(\"\");\r\n  const [connectionType, setConnectionType] = useState<\"cdp\" | \"launch\">(\"cdp\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Fetch status on mount\r\n  useEffect(() => {\r\n    fetchStatus();\r\n    fetchConnections();\r\n  }, []);\r\n\r\n  const fetchStatus = async () => {\r\n    try {\r\n      const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3001/api/v1\";\r\n      const response = await fetch(`${apiUrl}/browser-automation/status`, {\r\n        headers: {\r\n          \"X-Master-Control-CLI\": \"true\",\r\n        },\r\n      });\r\n      if (!response.ok) throw new Error(\"Failed to fetch status\");\r\n      const data = await response.json();\r\n      setConnectionStatus(data);\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    }\r\n  };\r\n\r\n  const fetchConnections = async () => {\r\n    try {\r\n      const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3001/api/v1\";\r\n      const response = await fetch(`${apiUrl}/browser-automation/connections`, {\r\n        headers: {\r\n          \"X-Master-Control-CLI\": \"true\",\r\n        },\r\n      });\r\n      if (!response.ok) throw new Error(\"Failed to fetch connections\");\r\n      const data = await response.json();\r\n      setConnections(data.connections || []);\r\n    } catch (err: any) {\r\n      console.error(\"Failed to fetch connections\", err);\r\n    }\r\n  };\r\n\r\n  const handleConnect = async () => {\r\n    if (connectionType === \"cdp\" && !cdpUrl.trim()) {\r\n      setError(\"CDP Connection URL is required\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3001/api/v1\";\r\n      const endpoint =\r\n        connectionType === \"cdp\"\r\n          ? `${apiUrl}/browser-automation/connect`\r\n          : `${apiUrl}/browser-automation/launch`;\r\n\r\n      const body =\r\n        connectionType === \"cdp\"\r\n          ? { cdpUrl, browserType: \"chrome\" }\r\n          : { headless: false, args: [] };\r\n\r\n      const response = await fetch(endpoint, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"X-Master-Control-CLI\": \"true\",\r\n        },\r\n        body: JSON.stringify(body),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const errorData = await response.json();\r\n        throw new Error(errorData.error || \"Connection failed\");\r\n      }\r\n\r\n      await fetchConnections();\r\n      await fetchStatus();\r\n      setCdpUrl(\"\");\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleDisconnect = async (connectionId: string) => {\r\n    setLoading(true);\r\n    try {\r\n      const apiUrl = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:3001/api/v1\";\r\n      const response = await fetch(\r\n        `${apiUrl}/browser-automation/connections/${connectionId}/disconnect`,\r\n        {\r\n          method: \"POST\",\r\n          headers: {\r\n            \"X-Master-Control-CLI\": \"true\",\r\n          },\r\n        }\r\n      );\r\n\r\n      if (!response.ok) {\r\n        throw new Error(\"Disconnection failed\");\r\n      }\r\n\r\n      await fetchConnections();\r\n      await fetchStatus();\r\n    } catch (err: any) {\r\n      setError(err.message);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6 space-y-6\">\r\n      <div>\r\n        <h1 className=\"text-2xl font-bold text-gray-900\">Tools</h1>\r\n        <p className=\"text-sm text-gray-500 mt-1\">Browser</p>\r\n      </div>\r\n\r\n      {/* Browser Automation Card */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6\">\r\n        <div className=\"flex items-center gap-3 mb-4\">\r\n          <div className=\"relative\">\r\n            <svg\r\n              className=\"w-6 h-6 text-gray-600\"\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              viewBox=\"0 0 24 24\"\r\n            >\r\n              <path\r\n                strokeLinecap=\"round\"\r\n                strokeLinejoin=\"round\"\r\n                strokeWidth={2}\r\n                d=\"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z\"\r\n              />\r\n            </svg>\r\n            {connectionStatus?.chromeAvailable && (\r\n              <div className=\"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white\"></div>\r\n            )}\r\n          </div>\r\n          <h2 className=\"text-lg font-semibold text-gray-900\">Browser Automation</h2>\r\n        </div>\r\n\r\n        <div className=\"mb-4\">\r\n          <p className=\"text-sm text-gray-600\">\r\n            {connectionStatus?.chromeAvailable\r\n              ? \"Ready (Chrome detected)\"\r\n              : \"Chrome not detected\"}\r\n          </p>\r\n        </div>\r\n\r\n        {error && (\r\n          <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\r\n            <p className=\"text-sm text-red-600\">{error}</p>\r\n          </div>\r\n        )}\r\n\r\n        <div className=\"space-y-4\">\r\n          {/* Connection Type */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n              Connection Type\r\n            </label>\r\n            <select\r\n              value={connectionType}\r\n              onChange={(e) => setConnectionType(e.target.value as \"cdp\" | \"launch\")}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"cdp\">CDP Connection</option>\r\n              <option value=\"launch\">Launch New Browser</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* CDP Connection URL */}\r\n          {connectionType === \"cdp\" && (\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                CDP Connection URL\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                value={cdpUrl}\r\n                onChange={(e) => setCdpUrl(e.target.value)}\r\n                placeholder=\"e.g., ws://127.0.0.1:9222/devtools/browser/...\"\r\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {/* Connect Button */}\r\n          <button\r\n            onClick={handleConnect}\r\n            disabled={loading}\r\n            className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n          >\r\n            {loading ? \"Connecting...\" : connectionType === \"cdp\" ? \"Connect\" : \"Launch Browser\"}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Active Connections */}\r\n        {connections.length > 0 && (\r\n          <div className=\"mt-6 pt-6 border-t border-gray-200\">\r\n            <h3 className=\"text-sm font-medium text-gray-700 mb-3\">Active Connections</h3>\r\n            <div className=\"space-y-2\">\r\n              {connections.map((conn) => (\r\n                <div\r\n                  key={conn.id}\r\n                  className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\"\r\n                >\r\n                  <div className=\"flex-1\">\r\n                    <p className=\"text-sm font-medium text-gray-900\">\r\n                      {conn.browserType.toUpperCase()}\r\n                    </p>\r\n                    <p className=\"text-xs text-gray-500 truncate\">{conn.cdpUrl}</p>\r\n                    <p className=\"text-xs text-gray-400 mt-1\">\r\n                      Status: {conn.status} |{\" \"}\r\n                      {conn.connectedAt && new Date(conn.connectedAt).toLocaleString()}\r\n                    </p>\r\n                  </div>\r\n                  <button\r\n                    onClick={() => handleDisconnect(conn.id)}\r\n                    disabled={loading}\r\n                    className=\"ml-3 px-3 py-1 text-sm text-red-600 hover:text-red-700 hover:bg-red-50 rounded transition-colors disabled:opacity-50\"\r\n                  >\r\n                    Disconnect\r\n                  </button>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n"],"names":[],"mappings":"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","debugId":null}}]
}