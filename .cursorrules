# Dese EA Plan â€“ Cursor KurallarÄ±

**Durum:** BakÄ±m modunda Ã¼retim sistemi. TÃ¼m deÄŸiÅŸiklikler hotfix veya bakÄ±m kapsamÄ±ndadÄ±r.

---

## ğŸ³ DOCKER DEVELOPMENT ENVIRONMENT RULES

**CRITICAL:** This project uses a **Full Docker Environment**. All development and production work MUST follow these rules.

### Infrastructure Configuration

- **All Services:** Run inside **Docker Desktop** via `docker-compose.yml`.
  - **Backend API:** `app` container (Port 3000).
  - **Frontend UI:** `frontend` container (Port 3001).
  - **Database:** `db` container (Port 5432).
  - **Redis:** `redis` container (Port 6379).
  - **MCP Services:** `finbot`, `mubot`, `dese`, `observability` containers.

### Networking Rules

- **Frontend to Backend:** Uses `NEXT_PUBLIC_API_URL` (browser access) or internal docker network (SSR).
- **Backend to Infra:** Connects to `db` and `redis` via service names.

### Development Workflow

1. **Start Environment:**
   ```powershell
   docker compose up -d
   ```
2. **View Logs:**
   ```powershell
   docker compose logs -f
   ```
3. **Run Commands (Migrations, etc.):**
   ```powershell
   docker compose exec app pnpm db:migrate
   ```

---

## Temel Uygulamalar

- Path alias kullanÄ±mÄ± zorunlu: `@/...`
- TypeScriptâ€™te `any` kullanÄ±lmaz; aÃ§Ä±k tipler tanÄ±mlanÄ±r.
- Loglama `logger` yardÄ±mÄ±yla yapÄ±lÄ±r (`console.*` yasak).
- Async iÅŸlemler `try/catch` veya `asyncHandler` ile sarÄ±lÄ±r, hiÃ§bir promise sahipsiz bÄ±rakÄ±lmaz.
- VeritabanÄ± eriÅŸimi Drizzle ORM Ã¼zerinden yapÄ±lÄ±r; raw SQL yazÄ±lmaz.
- Gizli bilgiler `.env` / secret yÃ¶netimi ile yÃ¶netilir, kaynak koda gÃ¶mÃ¼lmez.

---

## MCP SunucularÄ± Ä°Ã§in Ek Åartlar

- Her uÃ§ta JWT doÄŸrulamasÄ± + RBAC yetki kontrolÃ¼ Ã§alÄ±ÅŸÄ±r.
- GerÃ§ek backend ve Prometheus APIâ€™lerine baÄŸlanÄ±lÄ±r; mock veri kullanÄ±lmaz.
- Redis Ã¶nbelleÄŸi (TTL varsayÄ±lan 60 sn) ve yapÄ±landÄ±rÄ±lmÄ±ÅŸ logging zorunludur.
- Hatalar `asyncHandler` ve merkezi error middlewareâ€™i ile ele alÄ±nÄ±r.

---

## Ã‡alÄ±ÅŸma AkÄ±ÅŸÄ± KÄ±sa Notlar

- Ana ÅŸube korunur; geliÅŸtirme `feature/*` veya `fix/*` dallarÄ±nda yapÄ±lÄ±r.
- PR aÃ§madan Ã¶nce `pnpm lint`, `pnpm test` ve ilgili Playwright senaryolarÄ± Ã§alÄ±ÅŸtÄ±rÄ±lÄ±r.
- Operasyonel kararlar ve destek kanallarÄ± iÃ§in `docs/OPERATIONS_GUIDE.md` referans alÄ±nÄ±r.
